<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head xmlns:th="http://www.thymeleaf.org">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thông tin tài khoản</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css'}">
    <style>
        /* CSS tùy chỉnh */
        body {
            background-color: #f5f5f5;
        }

        .list-group-item {
            transition: all 0.3s ease-in-out;
        }

        .list-group-item:hover {
            background-color: #007bff;
            color: white;
        }

        .form-content {
            transition: opacity 0.5s ease-in-out;
        }

        .shadow {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .table-auto {
            border: 1px solid #dee2e6;
        }

        .table-auto th,
        .table-auto td {
            padding: 12px;
            text-align: center;
        }

        .table-auto thead {
            background-color: #007bff;
            color: white;
        }

        /*Navbar custom*/
        .custom-navbar {
            padding: 8px 0; /* Tăng chiều cao của navbar */
        }

        .custom-navbar .navbar-brand,
        .custom-navbar .nav-link {
            font-size: 1.2rem; /* Tăng kích thước font */
        }

        /* Thêm viền cam dưới navbar */
        .custom-navbar {
            border-bottom: 3px solid orange; /* Viền cam */
        }

        .search-bar .form-control {
            height: 40px; /* Tăng chiều cao của ô tìm kiếm */
        }

        .search-bar .btn {
            background-color: orange; /* Màu nền cam cho nút tìm kiếm */
            color: white; /* Màu chữ trắng */
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light custom-navbar">
    <div class="container-fluid">
        <!-- Logo -->
        <a class="navbar-brand" href="/vin-fan/danh-muc">
            <img th:src="@{/admin/assets/static/images/logo/logoVinFan.png}" style="width: 40px; height: auto;"
                 alt="Logo">
        </a>
    </div>
</nav>
<div class="container mt-4">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3">
            <!-- Thẻ chứa hình ảnh và tên -->
            <!--            <div class="list-group-item d-flex align-items-center justify-content-center mb-5">-->
            <!--                <img th:src="@{/admin/assets/static/images/logo/logoVinFan.png}" alt="User Avatar" class="img-thumbnail"-->
            <!--                     style="width: 50px; height: 50px; object-fit: cover;">-->
            <!--                <span class="ms-3">Tên người dùng</span>-->
            <!--            </div>-->
            <div class="list-group shadow">
                <a href="#" class="list-group-item list-group-item-action" data-form="form-profile">Hồ sơ</a>
                <a href="#" class="list-group-item list-group-item-action" data-form="form-address">Địa chỉ</a>
                <a href="#" class="list-group-item list-group-item-action" data-form="form-orders">Đơn mua</a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-md-9">
            <div id="form-profile" class="form-content d-none shadow p-4 bg-white rounded">
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-6">
                            <!--                                            cho pham sua kh-->
                            <form th:action="@{/vin-fan/sua-khach-hang}" th:object="${khachHang}" method="post">
                                <input type="hidden" th:field="*{id}"/>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="row mb-4">
                                            <div class="col-12">
                                                <label class="fw-bold">
                                                    <span class="text-danger">*</span> Tên
                                                </label>
                                                <input type="text"
                                                       class="form-control border-0 border-bottom rounded-0"
                                                       name="ten" id="ten" placeholder="Nhập tên"
                                                       th:field="*{ten}">
                                            </div>
                                        </div>

                                        <div class="row mb-4">
                                            <div class="col-12">
                                                <label class="fw-bold">
                                                    <span class="text-danger">*</span> Số điện thoại
                                                </label>
                                                <input type="text"
                                                       class="form-control border-0 border-bottom rounded-0"
                                                       name="soDienThoai" placeholder="Nhập số điện thoại"
                                                       th:field="*{soDienThoai}"/>
                                            </div>
                                        </div>

                                        <div class="row mb-4">
                                            <div class="col-12">
                                                <label class="fw-bold">
                                                    <span class="text-danger">*</span> Mật khẩu
                                                </label>
                                                <input type="text"
                                                       class="form-control border-0 border-bottom rounded-0"
                                                       name="matKhau" id="matKhau" placeholder="Nhập mật khẩu"
                                                       th:field="*{matKhau}" oninput="maskPassword()"/>
                                            </div>
                                        </div>

                                        <script>
                                            function maskPassword() {
                                                var input = document.getElementById('matKhau');
                                                var value = input.value;
                                                var maskedValue = value.replace(/./g, '*');
                                                input.value = maskedValue;
                                            }
                                        </script>


                                        <div class="row mb-4">
                                            <!-- Ngày sinh -->
                                            <div class="col-md-4">
                                                <label class="fw-bold">Ngày sinh</label>
                                                <input type="date"
                                                       class="form-control border-0 border-bottom rounded-0"
                                                       name="ngaySinh" id="ngaySinh"
                                                       th:field="*{ngaySinh}">
                                            </div>
                                            <!-- Giới tính -->
                                            <div class="col-md-4">
                                                <label class="form-label fw-bold">Giới tính</label>
                                                <div class="d-flex align-items-center gap-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio"
                                                               th:field="*{gioiTinh}"
                                                               value="Nam"
                                                               id="gridRadios1"
                                                               th:checked="${gioiTinh == 'Nam'}">
                                                        <label class="form-check-label" for="gridRadios1">Nam</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio"
                                                               th:field="*{gioiTinh}"
                                                               value="Nữ"
                                                               id="gridRadios2"
                                                               th:checked="${gioiTinh == 'Nữ'}">
                                                        <label class="form-check-label" for="gridRadios2">Nữ</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <button type="submit" class="btn btn-outline-warning">
                                        Sửa
                                    </button>
                                </div>
                            </form>
                        </div>
                        <!-- Cột chứa ảnh -->
                        <!--                        <div class="col-md-6 d-none d-md-block image-container text-center">-->
                        <!--                            <img src="https://img.pikbest.com/wp/202413/propeller-small-airplane-with-propellers-coloring-pages-outline-sketch-drawing-vector_10473779.jpg!sw800"-->
                        <!--                                 alt="Login Image" width="400" height="400"/>-->
                        <!--                        </div>-->
                    </div>
                </div>
            </div>

            <div id="form-address" class="form-content d-none shadow p-4 bg-white rounded">
                <div class="row">
                    <div class="col-md-6">
                        <div>
                            <form th:action="@{/vin-fan/sua-khach-hang/them-dia-chi}" method="post">
                                <!-- Truyền ID của khách hàng -->
                                <input type="hidden" name="khachHangId" th:value="${khachHang.id}"/>

                                <div class="row mb-3">
                                    <!-- Tỉnh/Thành phố -->
                                    <div class="col-md-6">
                                        <label for="city2" class="form-label fw-bold">Tỉnh/Thành phố</label>
                                        <select class="form-select" id="city2" name="tinhThanhPho">
                                            <option value="" selected>Chọn tỉnh thành</option>
                                        </select>
                                    </div>

                                    <!-- Quận/Huyện -->
                                    <div class="col-md-6">
                                        <label for="district2" class="form-label fw-bold">Quận/Huyện</label>
                                        <select class="form-select" id="district2" name="quanHuyen">
                                            <option value="" selected>Chọn quận huyện</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <!-- Phường/Xã -->
                                    <div class="col-md-6">
                                        <label for="ward2" class="form-label fw-bold">Phường/Xã</label>
                                        <select class="form-select" id="ward2" name="xaPhuong">
                                            <option value="" selected>Chọn phường xã</option>
                                        </select>
                                    </div>

                                    <!-- Số nhà/ngõ đường -->
                                    <div class="col-md-6">
                                        <label for="soNhaNgoDuong" class="form-label fw-bold">Số nhà/ngõ
                                            đường</label>
                                        <input type="text" class="form-control" id="soNhaNgoDuong"
                                               name="soNhaNgoDuong" placeholder="Nhập số nhà/ngõ đường">
                                    </div>
                                </div>

                                <button type="submit" onclick="disPlayBlook()"
                                        class="btn btn-outline-success">
                                    Thêm
                                </button>
                            </form>
                        </div>
                    </div>
                    <br>
                    <div class="col-md-6">
                        <div id="danhSachDiaChi" th:each="diaChi, stat : ${diaChiList}">
                            <form th:action="@{/vin-fan/sua-khach-hang/dia-chi-mac-dinh}"
                                  method="post">
                                <input type="hidden" name="khachHangId" th:value="${khachHang.id}"/>
                                <input type="hidden" name="diaChiId" th:value="${diaChi.id}"/>
                                <input type="hidden" th:id="'tinhThanhPho' + ${stat.index}"
                                       th:value="${diaChi.tinhThanhPho}"/>
                                <input type="hidden" th:id="'quanHuyen' + ${stat.index}"
                                       th:value="${diaChi.quanHuyen}"/>
                                <input type="hidden" th:id="'xaPhuong' + ${stat.index}"
                                       th:value="${diaChi.xaPhuong}"/>

                                <div class="mb-2">
                                    <h6 class="mb-1" th:id="'city' + ${stat.index}">
                                        <span class="fw-bold">Tỉnh/Thành phố:</span>
                                    </h6>
                                    <h6 class="mb-1" th:id="'district' + ${stat.index}">
                                        <span class="fw-bold">Quận/Huyện:</span>
                                    </h6>
                                    <h6 class="mb-1" th:id="'ward' + ${stat.index}">
                                        <span class="fw-bold">Xã/Phường:</span>
                                    </h6>
                                    <h6 class="mb-1" th:text="${diaChi.soNhaNgoDuong}">
                                        <span class="fw-bold">Chi tiết:</span>
                                    </h6>
                                    <input type="radio" th:id="'radio' + ${diaChi.id} "
                                           name="checkDiaChiMacDinh"
                                           th:value="${diaChi.id}" th:checked="${diaChi.trangThai == true}"
                                           onchange="this.form.submit()"/>
                                </div>
                            </form>
                            <a class="btn btn-outline-danger"
                               th:href="@{/vin-fan/sua-khach-hang/xoa/{id}(id=${diaChi.id}, khachHangId=${khachHang.id})}">
                                Xóa
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div id="form-orders" class="form-content d-none shadow p-4 bg-white rounded">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Đơn mua</h3>
                <!-- Kiểm tra hóa đơn -->
                <div th:if="${#lists.isEmpty(hoaDons)}" class="text-center text-gray-600 mt-4">
                    <p>Không có hóa đơn nào cho khách hàng này.</p>
                </div>

                <!-- Input tìm kiếm -->
                <!-- Tìm kiếm -->
                <div class="mt-4">
                    <input type="text" id="searchInput" placeholder="Tìm kiếm theo mã hóa đơn"
                           class="border border-gray-300 px-4 py-2 rounded-md w-full">
                </div>

                <!-- Danh sách hóa đơn -->
                <div th:unless="${#lists.isEmpty(hoaDons)}" class="table-container"
                     style="max-height: 400px; overflow-y: auto;">
                    <table class="table-auto w-full border-collapse border border-gray-200 mt-4">
                        <thead>
                        <tr class="bg-gray-100 text-gray-700">
                            <th class="px-4 py-2 border text-center">Mã hóa đơn</th>
                            <th class="px-4 py-2 border text-center">Ngày tạo</th>
                            <th class="px-4 py-2 border text-center">Số tiền</th>
                            <th class="px-4 py-2 border text-center">Trạng thái</th>
                            <th class="px-4 py-2 border text-center">Chi tiết</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="hoaDon : ${hoaDons}" class="text-gray-800 hover:bg-gray-50">
                            <td class="px-4 py-2 border text-center" th:text="${hoaDon.ma}"></td>
                            <td class="px-4 py-2 border text-center" th:text="${hoaDon.ngayTao}"></td>
                            <td class="px-4 py-2 border text-center giaVND" th:text="${hoaDon.tongTien}"></td>
                            <td class="px-4 py-2 border text-center"
                                th:switch="${hoaDon.trangThai}">
                                <span th:case="0" class="text-success-emphasis">Đang treo</span>
                                <span th:case="1" class="text-secondary-emphasis">Đang chờ xác nhận</span>
                                <span th:case="2" class="text-success">Đã xác nhận</span>
                                <span th:case="3" class="text-warning">Đang giao hàng</span>
                                <span th:case="4" class="text-primary">Hoàn thành</span>
                                <span th:case="5" class="text-danger">Hủy</span>
                            </td>
                            <td class="px-4 py-2 border text-center">
                                <a th:href="@{/vin-fan/hoa-don-kh/{id}(id=${hoaDon.id})}"
                                   class="text-blue-500 hover:underline">Xem
                                    chi tiết</a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.querySelectorAll('.list-group-item').forEach(item => {
        item.addEventListener('click', function (e) {
            e.preventDefault();

            // Hide all forms
            document.querySelectorAll('.form-content').forEach(form => {
                form.classList.add('d-none');
            });

            // Remove active class from all links
            document.querySelectorAll('.list-group-item').forEach(link => {
                link.classList.remove('active');
            });

            // Show the selected form
            const formId = this.getAttribute('data-form');
            document.getElementById(formId).classList.remove('d-none');

            // Add active class to clicked link
            this.classList.add('active');
        });
    });
</script>


<script>
    document.getElementById("searchInput").addEventListener("input", function () {
        const searchValue = this.value.toLowerCase();
        const rows = document.querySelectorAll("tbody tr");

        rows.forEach(row => {
            const maHoaDon = row.querySelector("td:nth-child(1)").textContent.toLowerCase();
            if (maHoaDon.includes(searchValue)) {
                row.style.display = ""; // Hiển thị
            } else {
                row.style.display = "none"; // Ẩn
            }
        });
    });
</script>

<script>
    function showForm(formId) {
        document.querySelectorAll('.bg-white').forEach(form => form.classList.add('hidden'));
        document.getElementById(formId).classList.remove('hidden');
    }
</script>
<script>
    document.querySelectorAll('.giaVND').forEach(element => {
        const originalValue = parseFloat(element.innerText);
        element.innerText = originalValue.toLocaleString('vi-VN', {
            style: 'currency',
            currency: 'VND',
            currencyDisplay: 'code' // Thay đổi từ 'symbol' thành 'code'
        });
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script th:replace="/admin/fragments/script :: script"></script>
<script th:inline="javascript">
    // Lấy danh sách địa chỉ từ Thymeleaf (chuyển từ dạng Thymeleaf sang JSON)

    var listDiaChi = /*[[${diaChiList}]]*/ [];

    // Duyệt qua danh sách địa chỉ
    // listDiaChi.forEach(function(diaChi) {
    //     console.log("Tỉnh/Thành phố: " + diaChi.tinhThanhPho);
    //     console.log("Quận/Huyện: " + diaChi.quanHuyen);
    //     console.log("Xã/Phường: " + diaChi.xaPhuong);
    // });
    // Thực hiện vòng lặp qua danh sách địa chỉ
    listDiaChi.forEach(function (diaChi, index) {
        // Lấy giá trị từ các trường input dựa theo chỉ số
        var idTinh = document.getElementById('tinhThanhPho' + index).value;
        var idHuyen = document.getElementById('quanHuyen' + index).value;
        var idXa = document.getElementById('xaPhuong' + index).value;

        // Phần tử hiển thị kết quả
        var citis = document.getElementById('city' + index);
        var districts = document.getElementById('district' + index);
        var wards = document.getElementById('ward' + index);

        // Cấu hình Axios để lấy dữ liệu từ GitHub
        var Parameter = {
            url: "https://raw.githubusercontent.com/kenzouno1/DiaGioiHanhChinhVN/master/data.json",
            method: "GET",
            responseType: "application/json",
        };

        // Gọi API để lấy dữ liệu địa giới hành chính
        axios(Parameter).then(function (result) {
            renderCity(result.data, idTinh, idHuyen, idXa, citis, districts, wards);
        });

        // Hàm xử lý dữ liệu địa giới hành chính
        function renderCity(data, idTinh, idHuyen, idXa, citis, districts, wards) {
            var selectedCity = data.find(city => city.Id == idTinh);
            if (selectedCity) {
                citis.textContent = "Tỉnh: " + selectedCity.Name;

                var selectedDistrict = selectedCity.Districts.find(district => district.Id == idHuyen);
                if (selectedDistrict) {
                    districts.textContent = "Quận / Huyện: " + selectedDistrict.Name;

                    var selectedWard = selectedDistrict.Wards.find(ward => ward.Id == idXa);
                    if (selectedWard) {
                        wards.textContent = "Xã / Phường: " + selectedWard.Name;
                    } else {
                        wards.textContent = "Xã / Phường: Không tìm thấy";
                    }
                } else {
                    districts.textContent = "Quận / Huyện: Không tìm thấy";
                    wards.textContent = "Xã / Phường: Không tìm thấy";
                }
            } else {
                citis.textContent = "Tỉnh: Không tìm thấy";
                districts.textContent = "Quận / Huyện: Không tìm thấy";
                wards.textContent = "Xã / Phường: Không tìm thấy";
            }
        }
    });
    var cities2 = document.getElementById("city2");
    var districts2 = document.getElementById("district2");
    var wards2 = document.getElementById("ward2");

    var parameter = {
        url: "https://raw.githubusercontent.com/kenzouno1/DiaGioiHanhChinhVN/master/data.json",
        method: "GET",
        responseType: "json",
    };

    axios(parameter).then(function (result) {
        renderCity2(result.data);
    });

    function renderCity2(data) {
        for (const city of data) {
            cities2.options[cities2.options.length] = new Option(city.Name, city.Id);
        }
        cities2.onchange = function () {
            districts2.length = 1;
            wards2.length = 1;
            if (this.value !== "") {
                const result = data.find(n => n.Id === this.value);
                if (result) {
                    for (const district of result.Districts) {
                        districts2.options[districts2.options.length] = new Option(district.Name, district.Id);
                    }
                }
            }
        };

        districts2.onchange = function () {
            wards2.length = 1;
            const selectedCity = data.find(n => n.Id === cities2.value);
            if (this.value !== "") {
                const result = selectedCity.Districts.find(n => n.Id === this.value);
                if (result) {
                    for (const ward of result.Wards) {
                        wards2.options[wards2.options.length] = new Option(ward.Name, ward.Id);
                    }
                }
            }
        };
    }


    function disPlayBlook() {
        var p = document.getElementById("magic");
        if (p.style.display == "block") {
            p.style.display = "none"
        } else {
            p.style.display = "block"
        }
    }

    function diachiMacDinh() {
        var nameButton = document.getElementsByName("checkDiaChiMacDinh")
        // var buttonMacDinh = document.getElementsByName("checkDiaChiMacDinh")
        for (var i = 0; i < nameButton.length; i++) {
            if (nameButton.values() == null) {
                console.log("khong co dc mac dinh")
            } else if (nameButton.values() == true) {
                buttonMacDinh[i].parentElement.style.color = "red"
            } else {
                buttons[i].parentElement.style.color = "blue";
            }
        }
    }

    // window.onload = diachiMacDinh
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.querySelector('form');

        form.addEventListener('submit', function (event) {
            let isValid = true;

            // Lấy các trường cần validate
            const ten = form.ten.value.trim();
            const soDienThoai = form.soDienThoai.value.trim();
            const ngaySinh = form.ngaySinh.value.trim();


            // Xóa các thông báo lỗi trước đó
            const errorMessages = document.querySelectorAll('.error-message');
            errorMessages.forEach(msg => msg.remove());

            // Hàm hiển thị lỗi
            function showError(input, message) {
                const error = document.createElement('div');
                error.className = 'error-message text-danger';
                error.innerText = message;
                input.parentElement.appendChild(error);
                isValid = false;
            }

            // Validate tên
            if (!ten) {
                showError(form.ten, 'Tên không được để trống.');
            }


            if (!matKhau) {
                showError(form.matKhau, 'Mật khẩu không được để trống.');
            } else if (matKhau.length < 6) {
                showError(form.matKhau, 'Mật khẩu phải có ít nhất 6 ký tự.');
            }


            const phoneRegex = /^[0-9]{10,11}$/;
            if (!soDienThoai) {
                showError(form.soDienThoai, 'Số điện thoại không được để trống.');
            } else if (!phoneRegex.test(soDienThoai)) {
                showError(form.soDienThoai, 'Số điện thoại không hợp lệ.');
            }

            // Validate ngày sinh
            if (!ngaySinh) {
                showError(form.ngaySinh, 'Ngày sinh không được để trống.');
            } else {
                const birthDate = new Date(ngaySinh);
                const today = new Date();
                const age = today.getFullYear() - birthDate.getFullYear();
                const month = today.getMonth() - birthDate.getMonth();

                if (month < 0 || (month === 0 && today.getDate() < birthDate.getDate())) {
                    age--; // Nếu sinh nhật chưa tới trong năm nay, giảm tuổi đi 1
                }

                if (age < 18) {
                    showError(form.ngaySinh, 'Bạn phải lớn hơn 18 tuổi.');
                }
            }


            if (!tinhThanhPho) {
                showError(form.tinhThanhPho, 'Vui lòng chọn Tỉnh/Thành phố.');
            }
            if (!quanHuyen) {
                showError(form.quanHuyen, 'Vui lòng chọn Quận/Huyện.');
            }
            if (!xaPhuong) {
                showError(form.xaPhuong, 'Vui lòng chọn Phường/Xã.');
            }
            if (!soNhaNgoDuong) {
                showError(form.soNhaNgoDuong, 'Vui lòng chọn số nhà ngõ đường.');
            }

            // Nếu form không hợp lệ, ngăn không cho gửi
            if (!isValid) {
                event.preventDefault(); // Ngăn chặn gửi form
                Swal.fire({
                    title: 'Lỗi!',
                    text: 'Vui lòng kiểm tra lại thông tin nhập vào.',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
            }
        });
    });
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.querySelector('form[action="/vin-fan/khach-hang/them-dia-chi"]');

        form.addEventListener('submit', function (event) {
            let isValid = true;

            // Lấy các trường cần validate
            const tinhThanhPho = form.tinhThanhPho.value.trim();
            const quanHuyen = form.quanHuyen.value.trim();
            const xaPhuong = form.xaPhuong.value.trim();
            const soNhaNgoDuong = form.soNhaNgoDuong.value.trim();

            // Xóa các thông báo lỗi trước đó
            const errorMessages = document.querySelectorAll('.error-message');
            errorMessages.forEach(msg => msg.remove());

            // Hàm hiển thị lỗi
            function showError(input, message) {
                const error = document.createElement('div');
                error.className = 'error-message text-danger';
                error.innerText = message;
                input.parentElement.appendChild(error);
                isValid = false;
            }

            // Validate địa chỉ
            if (!tinhThanhPho) {
                showError(form.tinhThanhPho, 'Vui lòng chọn Tỉnh/Thành phố.');
            }
            if (!quanHuyen) {
                showError(form.quanHuyen, 'Vui lòng chọn Quận/Huyện.');
            }
            if (!xaPhuong) {
                showError(form.xaPhuong, 'Vui lòng chọn Phường/Xã.');
            }
            if (!soNhaNgoDuong) {
                showError(form.soNhaNgoDuong, 'Vui lòng nhập số nhà/ngõ đường.');
            }

            // Nếu form không hợp lệ
            if (!isValid) {
                event.preventDefault(); // Ngăn chặn gửi form
                Swal.fire({
                    title: 'Lỗi!',
                    text: 'Vui lòng kiểm tra lại thông tin nhập vào.',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
            }
        });
    });
</script>

</body>
</html>
